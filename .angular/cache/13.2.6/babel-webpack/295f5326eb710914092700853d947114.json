{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\vinee\\\\OneDrive\\\\Desktop\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\vinee\\\\OneDrive\\\\Desktop\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component, EventEmitter, Output } from \"@angular/core\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { CustomerService } from \"./services/customer.service\";\nimport { TokenStorageService } from '../../services/token-storage.service';\nimport { Customer } from './services/customer';\nimport { Login } from './services/login';\nimport { LoginService } from './services/login.service';\n\nvar CustomerComponent = /*#__PURE__*/function () {\n  function CustomerComponent(tokenStorageService, customerService, loginService, route, router) {\n    _classCallCheck(this, CustomerComponent);\n\n    this.tokenStorageService = tokenStorageService;\n    this.customerService = customerService;\n    this.loginService = loginService;\n    this.route = route;\n    this.router = router;\n    this.customer = new Customer();\n    this.loginfrm = new Login();\n    this.user_level_id = window.sessionStorage.user_level_id;\n    this.user_id = window.sessionStorage.user_id;\n    this.submitted = false;\n    this.isUpdate = false;\n    this.msg = \"\";\n    this.type = \"danger\";\n    this.customer_id = \"save\";\n    this.readonly = false;\n    this.user = this.tokenStorageService.getUser();\n    this.registrationMessage = \"\";\n    this.messageEvent = new EventEmitter();\n  }\n\n  _createClass(CustomerComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var id = this.route.snapshot.paramMap.get('id');\n\n      if (this.user_id) {\n        this.isUpdate = true;\n        this.getCustomer(this.user_id);\n      } else {\n        this.loginfrm.login_level_id = \"\";\n        this.customer.customer_department = \"\";\n        this.customer.customer_sal = \"\";\n        this.customer.customer_gender = \"\";\n        this.customer.customer_state = \"\";\n        this.customer.customer_country = \"\";\n      }\n    }\n  }, {\n    key: \"getCustomer\",\n    value: function getCustomer(id) {\n      var _this = this;\n\n      this.customerService.getCustomer(id).subscribe(function (data) {\n        console.log(data);\n        _this.customer = data;\n      }, function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"newCustomer\",\n    value: function newCustomer() {\n      this.submitted = false;\n      this.customer = new Customer();\n    }\n  }, {\n    key: \"save\",\n    value: function save() {\n      var _this2 = this;\n\n      // Check Login ID Exits\n      this.loginService.checkUserNameExits(this.loginfrm.login_email).subscribe(function (logindata) {\n        if (typeof logindata[0] === 'object' && logindata[0].hasOwnProperty('login_email')) {\n          console.log(\"Username Exits \");\n          console.log(logindata);\n          _this2.msg = \"Error : Username already exits. Kindly choose another !!!\";\n        } else {\n          // Saving Customer and Login Details\n          _this2.customerService.createCustomer(_this2.customer).subscribe(function (data) {\n            _this2.loginfrm.login_customer_id = data['customer_id']; // Saving Login Information \n\n            _this2.loginService.createLogin(_this2.loginfrm).subscribe(function (logindata) {\n              console.log(\"Loging Saved Data\");\n              console.log(logindata);\n            });\n\n            _this2.registrationMessage = \"Your account has registered successfully. Kindly login with your email and password !!!\";\n\n            _this2.messageEvent.emit(_this2.registrationMessage);\n\n            _this2.router.navigate(['/login']);\n          }, function (err) {\n            _this2.registrationMessage = err.error.message; // this.isSignUpFailed = true;\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var id = this.route.snapshot.paramMap.get('id');\n\n      if (this.user_id) {\n        this.updateCustomer();\n      } else {\n        this.submitted = true;\n        this.save();\n      }\n    }\n  }, {\n    key: \"updateCustomer\",\n    value: function updateCustomer() {\n      var _this3 = this;\n\n      console.log(this.customer);\n      this.customerService.updateCustomer(this.customer.customer_id, this.customer).subscribe(function (data) {\n        console.log(data); // this.isSuccessful = true;\n        // this.isSignUpFailed = false;\n\n        if (_this3.user_level_id == \"2\") {\n          _this3.msg = \"Success : Your Account Updated Successfully !!!\";\n          _this3.type = \"success\";\n\n          _this3.router.navigate(['/register']);\n        }\n      }, function (err) {// this.registrationMessage = err.error.message;\n        // this.isSignUpFailed = true;\n      });\n    }\n  }]);\n\n  return CustomerComponent;\n}();\n\n__decorate([Output(), __metadata(\"design:type\", Object)], CustomerComponent.prototype, \"messageEvent\", void 0);\n\nCustomerComponent = __decorate([Component({\n  selector: 'app-customer',\n  templateUrl: './customer.component.html',\n  styleUrls: ['./customer.component.css']\n}), __metadata(\"design:paramtypes\", [TokenStorageService, CustomerService, LoginService, ActivatedRoute, Router])], CustomerComponent);\nexport { CustomerComponent };","map":null,"metadata":{},"sourceType":"module"}