{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\vinee\\\\OneDrive\\\\Desktop\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\vinee\\\\OneDrive\\\\Desktop\\\\Online Fashion Store\\\\online_fashion_store_angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport { TokenStorageService } from '../../services/token-storage.service';\n\nvar UserLogin = /*#__PURE__*/function () {\n  function UserLogin(authService, tokenStorage, router) {\n    _classCallCheck(this, UserLogin);\n\n    this.authService = authService;\n    this.tokenStorage = tokenStorage;\n    this.router = router;\n    this.form = {};\n    this.isLoggedIn = false;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n  }\n\n  _createClass(UserLogin, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      if (this.tokenStorage.getToken()) {\n        this.isLoggedIn = true;\n        this.router.navigate(['/user/dashboard']);\n      }\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var _this = this;\n\n      this.authService.login(this.form).subscribe(function (data) {\n        if (data != null) {\n          console.log('login data: ', data[0]);\n\n          _this.tokenStorage.saveToken(\"111\");\n\n          _this.tokenStorage.saveUser(data[0]);\n\n          window.sessionStorage.user_level_id = data[0].login_level_id;\n          window.sessionStorage.user_id = data[0].login_employee_id;\n          _this.isLoginFailed = false;\n          _this.isLoggedIn = true;\n\n          _this.router.navigate(['/user/dashboard']);\n        } else {\n          _this.errorMessage = \"Invalid Email and Password. Kindly try again !!!!\";\n          _this.isLoginFailed = true;\n        } //this.reloadPage();\n\n      }, function (err) {\n        console.log(err.error);\n        _this.errorMessage = \"Invalid Email and Password. Kindly try again !!!!\"; //err.error.message;\n\n        _this.isLoginFailed = true;\n      });\n    }\n  }, {\n    key: \"reloadPage\",\n    value: function reloadPage() {\n      window.location.reload();\n    }\n  }]);\n\n  return UserLogin;\n}();\n\nUserLogin = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './user-login.component.html',\n  styleUrls: ['./user-login.component.css']\n}), __metadata(\"design:paramtypes\", [AuthService, TokenStorageService, Router])], UserLogin);\nexport { UserLogin };","map":null,"metadata":{},"sourceType":"module"}